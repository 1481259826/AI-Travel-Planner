# ============================================
# AI 旅行规划师 - 环境变量配置模板
# ============================================
# 说明：
# 1. 复制此文件为 .env.local
# 2. 将占位符替换为真实的 API 密钥
# 3. .env.local 不会被提交到 Git（已在 .gitignore 中）
# ============================================

# ============================================
# Supabase - 认证和数据库（必需）
# ============================================
# 获取方式：
# 1. 访问 https://supabase.com 注册/登录
# 2. 创建新项目或选择已有项目
# 3. 进入 Settings → API
# 4. 复制 Project URL 和 anon public key
# 文档：https://supabase.com/docs/guides/getting-started
# ============================================
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key

# Service role key for server-side operations (keep it secret!)
# Required for share feature API routes
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# ============================================
# DeepSeek API - AI 行程生成（必需）
# ============================================
# 获取方式：
# 1. 访问 https://platform.deepseek.com 注册账号
# 2. 进入 API Keys 页面
# 3. 创建新密钥
# 4. 复制密钥
# 文档：https://platform.deepseek.com/docs
# ============================================
DEEPSEEK_API_KEY=your_deepseek_api_key
DEEPSEEK_BASE_URL=https://api.deepseek.com

# ============================================
# ModelScope API - Qwen 系列模型（可选/本次集成）
# ============================================
# 获取方式：
# 1. 访问 https://modelscope.cn 登录
# 2. 进入 体验平台 → API 推理服务，创建并获取 API Key
# 3. 免费额度有限，注意速率限制
# 文档： https://modelscope.cn/（API 推理服务）
# ============================================
MODELSCOPE_API_KEY=your_modelscope_api_key
MODELSCOPE_BASE_URL=https://api-inference.modelscope.cn/v1/

# ============================================
# 语音识别 API（可选 - 当前使用浏览器原生 Web Speech API）
# ============================================
# 科大讯飞语音识别：
# 获取方式：https://www.xfyun.cn/services/voicedictation
# 1. 注册讯飞开放平台账号
# 2. 创建应用，选择"语音听写"（实时语音转写）
# 3. 获取 APPID、API Key 和 API Secret（WebSocket 语音识别需要）
# ============================================
VOICE_API_KEY=your_voice_api_key
VOICE_APP_ID=your_voice_app_id
VOICE_API_SECRET=your_voice_api_secret

# ============================================
# 地图服务 API（必需 - 行程地图显示）
# ============================================
# 高德地图需要配置两个 Key：
#
# 1. 【前端 JS API Key】- 必须在此配置文件中配置
#    - 用途：浏览器中加载地图、显示标记点、路线规划等前端功能
#    - 类型：Web 端（JS API）
#    - 配置方式：仅支持在 .env.local 中配置（构建时注入前端代码）
#
# 2. 【后端 Web 服务 Key】- 可在此配置或在 API Key 管理界面配置
#    - 用途：服务端地理编码、POI 搜索、获取景点照片等
#    - 类型：Web 服务
#    - 配置方式：
#      方式 1: 在此文件中配置 AMAP_WEB_SERVICE_KEY（推荐，系统级）
#      方式 2: 在应用的"设置 → API Key 管理"中配置（用户级，更灵活）
#
# 获取方式：https://lbs.amap.com/api/javascript-api/guide/abc/prepare
# 1. 注册高德开放平台账号
# 2. 进入控制台 → 应用管理 → 我的应用
# 3. 创建新应用，分别添加两个 Key：
#    - Key 1：选择"Web 端（JS API）"
#    - Key 2：选择"Web 服务"
# 4. 在 JS API Key 设置中配置允许的域名（localhost、你的域名）
# 5. 分别复制两个 Key 填入下方
# 6. （可选）获取安全密钥（Security Key）用于更高级别的安全防护
#
# 文档：https://lbs.amap.com/api/javascript-api/summary
# ============================================

# 【必需】前端地图显示 Key（Web 端 JS API）
# 注意：此 Key 必须在 .env.local 中配置，无法在应用内管理
NEXT_PUBLIC_MAP_API_KEY=your_map_js_api_key

# 【可选】后端地图服务 Key（Web 服务 API）
# 不配置会影响：景点坐标准确度、景点照片获取
# 也可以在应用的"设置 → API Key 管理"界面配置（服务名称：高德地图 Web 服务）
AMAP_WEB_SERVICE_KEY=your_amap_web_service_key

# 【可选】高德地图安全密钥（推荐配置以防止盗用）
# NEXT_PUBLIC_MAP_SECURITY_KEY=your_map_security_key

# ============================================
# 应用配置
# ============================================
# 应用基础 URL（用于生成分享链接、SEO 等）
# 开发环境：http://localhost:3008
# 生产环境：https://your-domain.com
# ============================================
NEXT_PUBLIC_BASE_URL=http://localhost:3008

# ============================================
# 数据加密密钥（必需 - 用于 API Key 加密存储）
# ============================================
# 用途：使用 AES-256 加密存储用户的 API Keys
# 生成方式：使用随机字符串（建议 32 字符以上）
# 示例生成命令（Node.js）：
#   node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# 或在线生成：https://www.random.org/strings/
#
# ⚠️ 安全提示：
# - 生产环境请使用强随机密钥
# - 密钥泄露会导致 API Keys 被解密，请妥善保管
# - 切勿将此密钥提交到版本控制系统
# ============================================
ENCRYPTION_KEY=your_32_char_or_longer_encryption_key_here

# ============================================
# Feature Flags - 功能开关
# ============================================
# NEXT_PUBLIC_USE_LANGGRAPH - 启用 LangGraph 多智能体架构
#   - true: 使用 LangGraph 工作流生成行程（支持流式进度显示）
#   - false: 使用传统单体 AI 调用（默认）
#   注意：使用 NEXT_PUBLIC_ 前缀以便前端可以访问
#
# ENABLE_PWA_DEV - 开发模式启用 PWA
#   - true: 开发环境也启用 Service Worker
#   - false: 仅生产环境启用（默认）
#
# LANGGRAPH_CHECKPOINTER - LangGraph 检查点存储类型
#   - memory: 内存存储（默认，适合开发环境）
#   - postgres: PostgreSQL 存储（推荐生产环境，支持中断恢复）
#   注意：使用 postgres 时需要配置 DATABASE_URL 或 SUPABASE_DB_URL
# ============================================
NEXT_PUBLIC_USE_LANGGRAPH=false
ENABLE_PWA_DEV=false
LANGGRAPH_CHECKPOINTER=memory

# ============================================
# LangGraph Tracing - 工作流追踪配置
# ============================================
# LANGGRAPH_TRACER - 追踪后端类型
#   - console: 输出到控制台（默认，适合开发调试）
#   - json: 输出到 JSON 文件（适合本地分析）
#   - langsmith: 使用 LangSmith 平台（需要配置 API Key）
#   - none: 禁用追踪
#
# LANGGRAPH_TRACING_ENABLED - 是否启用追踪
#   - true: 启用（默认）
#   - false: 禁用
#
# LANGGRAPH_TRACE_LOG_DETAILS - 是否记录输入输出详情
#   - true: 记录完整的输入输出（注意：可能包含敏感数据）
#   - false: 不记录详情（默认）
#
# LANGGRAPH_TRACE_LOG_TOKENS - 是否记录 Token 使用
#   - true: 记录 Token 统计（默认）
#   - false: 不记录
#
# LANGGRAPH_TRACE_OUTPUT_DIR - JSON 追踪文件输出目录
#   默认: ./logs/traces
# ============================================
LANGGRAPH_TRACER=console
LANGGRAPH_TRACING_ENABLED=true
LANGGRAPH_TRACE_LOG_DETAILS=false
LANGGRAPH_TRACE_LOG_TOKENS=true
# LANGGRAPH_TRACE_OUTPUT_DIR=./logs/traces

# ============================================
# LangSmith 配置（可选 - 仅 LANGGRAPH_TRACER=langsmith 时需要）
# ============================================
# 获取方式：
# 1. 访问 https://smith.langchain.com 注册账号
# 2. 进入 Settings → API Keys
# 3. 创建新的 API Key
# 文档：https://docs.smith.langchain.com/
# ============================================
# LANGSMITH_API_KEY=your_langsmith_api_key
# LANGSMITH_PROJECT=ai-travel-planner

# ============================================
# PostgreSQL 直连配置（LangGraph Checkpointer 使用）
# ============================================
# 用途：LangGraph 检查点持久化存储
# 仅当 LANGGRAPH_CHECKPOINTER=postgres 时需要配置
#
# 方式 1: 使用 Supabase 数据库连接字符串
# 获取方式：Supabase Dashboard → Settings → Database → Connection string
# 格式: postgresql://postgres:[YOUR-PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres
#
# 方式 2: 使用通用 PostgreSQL 连接字符串
# 格式: postgresql://user:password@host:port/database
#
# 注意：
# - 首次使用前需要执行 database/langgraph-checkpointer.sql 创建表
# - 生产环境建议使用连接池（如 Supabase 的 Pooler 连接）
# ============================================
# SUPABASE_DB_URL=postgresql://postgres:[YOUR-PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres
# DATABASE_URL=postgresql://user:password@localhost:5432/ai_travel_planner

# ============================================
# 其他配置说明
# ============================================
# 环境变量命名规则：
# - NEXT_PUBLIC_* : 可在客户端使用（浏览器）
# - 无前缀      : 仅服务端使用（更安全）
#
# 安全提示：
# - 不要将 .env.local 提交到 Git
# - 定期更换敏感密钥
# - 生产环境使用环境变量管理工具
# ============================================

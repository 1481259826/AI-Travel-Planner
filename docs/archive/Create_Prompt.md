# AI 旅行规划师 Web 应用开发项目

## 项目概述
开发一个基于 Web 的 AI 旅行规划师应用，通过 AI 技术简化旅行规划流程，提供智能行程规划、费用管理和实时旅行辅助功能。

## 核心功能需求

### 1. 智能行程规划
- **语音/文字输入**：必须支持语音输入（科大讯飞或其他语音识别 API）
- **输入参数**：
  - 旅行目的地
  - 旅行日期（开始-结束）
  - 预算金额
  - 同行人数及类型（成人/儿童）
  - 旅行偏好（美食/购物/文化/自然风光/亲子等）
- **AI 生成内容**：
  - 每日详细行程安排
  - 交通方式推荐（飞机/火车/自驾等）
  - 住宿推荐（含价格区间）
  - 景点推荐（含开放时间、门票价格）
  - 餐厅推荐（含特色菜品、人均消费）
  - 行程优化建议

### 2. 费用预算与管理
- **预算分析**：
  - AI 自动估算总费用
  - 费用分类（交通/住宿/餐饮/景点/其他）
  - 每日预算分配
- **费用记录**：
  - 支持语音输入记录开销
  - 实时预算对比（预算 vs 实际）
  - 费用统计图表展示

### 3. 用户管理与数据存储
- **注册登录系统**：
  - 邮箱/密码注册登录
  - 第三方登录（可选：Google/微信）
- **数据管理**：
  - 保存多份旅行计划
  - 行程草稿自动保存
  - 历史行程查看
  - 行程分享功能（生成链接或二维码）
- **云端同步**：
  - 所有数据云端存储
  - 多设备实时同步

## 技术栈建议

### 前端框架
- **推荐**：React + Vite 或 Next.js
- **UI 库**：Tailwind CSS + shadcn/ui 或 Ant Design/Material-UI
- **状态管理**：React Context API 或 Zustand

### 后端与数据库
- **推荐方案**：Supabase（提供认证、数据库、实时同步）
- **备选方案**：Firebase（Authentication + Firestore）
- **数据表结构**：
  - users（用户信息）
  - trips（旅行计划）
  - expenses（费用记录）
  - preferences（用户偏好）

### AI 与 API 集成
- **语音识别**：
  - 科大讯飞语音 API
  - 备选：百度语音、阿里云语音
- **大语言模型**：
  - Claude API（Anthropic）
  - 备选：OpenAI GPT-4、通义千问、文心一言
- **地图服务**：
  - 高德地图 Web API
  - 备选：百度地图 API
  - 功能：地点搜索、路线规划、地图展示

### 其他工具
- **语音处理**：Web Speech API（浏览器原生）+ 后端语音识别 API
- **图片资源**：Unsplash API 或 Pexels API（获取目的地图片）
- **图表库**：Recharts 或 Chart.js（费用统计可视化）

## UI/UX 设计要求

### 页面结构
1. **首页/登录页**
   - 简洁的登录/注册表单
   - 项目介绍和核心功能展示

2. **主控制台**
   - 我的行程列表
   - 创建新行程按钮
   - 快速访问历史行程

3. **行程创建页**
   - 语音输入按钮（醒目位置）
   - 表单输入（目的地/日期/预算等）
   - 实时 AI 生成进度显示

4. **行程详情页**
   - 地图为主的交互界面（显示路线和景点标记）
   - 左侧：每日行程时间轴
   - 右侧：详细信息面板
   - 底部：费用统计卡片

5. **费用管理页**
   - 预算总览
   - 费用记录列表（支持语音添加）
   - 统计图表（饼图/柱状图）

### 设计原则
- **响应式设计**：适配桌面、平板、手机
- **地图优先**：地图占据主要视觉空间
- **清晰层次**：信息分组明确，避免杂乱
- **美观图片**：每个景点/餐厅展示高质量图片
- **易用性**：语音按钮易于触达，操作流程简洁

## 开发步骤建议

### 阶段一：基础框架搭建
1. 初始化项目（React/Next.js）
2. 配置 Tailwind CSS 和组件库
3. 搭建页面路由结构
4. 创建基础 UI 组件（按钮/输入框/卡片等）

### 阶段二：用户系统
1. 集成 Supabase/Firebase
2. 实现注册/登录功能
3. 创建用户数据表
4. 实现受保护路由

### 阶段三：核心功能开发
1. **语音输入模块**：
   - 集成语音识别 API
   - 实现语音转文字
   - 添加录音动画效果

2. **AI 行程规划**：
   - 设计 Prompt 模板
   - 调用 LLM API 生成行程
   - 解析 AI 返回结果并格式化
   - 存储行程数据到数据库

3. **地图集成**：
   - 集成高德/百度地图
   - 在地图上标记景点
   - 绘制路线
   - 实现地图交互（点击标记显示详情）

4. **费用管理**：
   - AI 预算估算
   - 语音录入费用
   - 费用统计和可视化

### 阶段四：优化与完善
1. 数据云端同步
2. 离线缓存（可选）
3. 性能优化
4. 错误处理和用户提示
5. 多语言支持（可选）

## 关键技术实现细节

### 语音识别实现
```javascript
// 伪代码示例
const VoiceInput = () => {
  const [isRecording, setIsRecording] = useState(false);
  
  const startRecording = async () => {
    // 1. 使用 Web Speech API 或调用科大讯飞 API
    // 2. 实时转换语音为文字
    // 3. 显示录音动画
    // 4. 更新输入框内容
  };
  
  return <Button onClick={startRecording}>🎤 语音输入</Button>;
};
```

### AI Prompt 设计示例
```
你是一个专业的旅行规划师。根据以下信息生成详细的旅行计划：

目的地：{destination}
日期：{startDate} 至 {endDate}（共 {days} 天）
预算：{budget} 元
人数：{travelers}
偏好：{preferences}

请生成包含以下内容的 JSON 格式行程：
1. 每日详细安排（时间/地点/活动）
2. 推荐住宿（名称/价格/位置）
3. 交通方式和费用
4. 餐厅推荐
5. 总费用估算
```

### 数据库表结构示例
```sql
-- trips 表
CREATE TABLE trips (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES users(id),
  destination VARCHAR,
  start_date DATE,
  end_date DATE,
  budget DECIMAL,
  travelers INTEGER,
  preferences TEXT[],
  itinerary JSONB,
  created_at TIMESTAMP,
  updated_at TIMESTAMP
);

-- expenses 表
CREATE TABLE expenses (
  id UUID PRIMARY KEY,
  trip_id UUID REFERENCES trips(id),
  category VARCHAR,
  amount DECIMAL,
  description TEXT,
  date DATE,
  created_at TIMESTAMP
);
```

## 注意事项

1. **API 密钥安全**：所有 API 密钥必须使用环境变量，不可提交到代码库
2. **错误处理**：网络请求、AI 调用、语音识别都需要完善的错误处理
3. **加载状态**：AI 生成行程时显示加载动画，提升用户体验
4. **数据验证**：前端和后端都要验证用户输入
5. **成本控制**：AI API 调用可能产生费用，需要合理控制使用
6. **隐私保护**：用户数据加密存储，遵守隐私政策

## 可选增强功能

- 实时天气查询
- 汇率转换
- 多人协作编辑行程
- 旅行日记/照片管理
- 紧急联系人/大使馆信息
- 离线地图下载
- 行程分享到社交媒体
- AI 聊天助手（旅行中实时答疑）

## 交付标准

- 代码结构清晰，注释完整
- 响应式设计，适配主流浏览器
- 核心功能完整可用
- 基本的错误处理和用户提示
- README 文档说明部署和使用方法

## 开始开发

请按照以上需求，优先实现核心功能（语音输入 + AI 行程规划 + 地图展示 + 用户系统），然后逐步完善其他功能。开发过程中如遇到技术问题，可以随时询问具体实现方案。